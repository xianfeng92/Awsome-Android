
## 常用数据结构优化

ArrayMap 及 SparseArray 是android的系统API，是专门为移动设备而定制的。用于在一定情况下取代 HashMap 而达到节省内存的目的。

1. 在数据量小的时候一般认为1000以下，当你的key为int的时候，使用SparseArray确实是一个很不错的选择，[内存大概能节省30%](https://www.jianshu.com/p/7b9a1b386265)，相比用HashMap，因为它key值不需要装箱，
   所以时间性能平均来看也优于HashMap,建议使用！

2. ArrayMap相对于SparseArray，特点就是key值类型不受限，任何情况下都可以取代HashMap,但是通过研究和测试发现，ArrayMap的内存节省并不明显，也就在10%左右，但是时间性能确是最差的，
   当然了，1000以内的数据量也无所谓了，加上它只有在API>=19才可以使用，个人建议没必要使用！还不如用HashMap放心。


## 枚举

Android平台上枚举是比较争议的，在较早的Android版本，使用枚举会导致包过大，在个例子里面，使用枚举甚至比直接使用int包的size大了10多倍 在stackoverflow上也有很多的讨论, 
大致意思是随着虚拟机的优化，目前枚举变量在Android平台性能问题已经不大，而__目前Android官方建议，使用枚举变量还是需要谨慎，因为枚举变量可能比直接用int多使用2倍的内存__。

## ListView复用

这个大家都知道，getView 里尽量复用 conertView,同时因为 getView 会频繁调用，要避免频繁地生成对象

## 谨慎使用多进程

现在很多App都不是单进程，为了保活，或者提高稳定性都会进行一些进程拆分，而实际上即使是空进程也会占用内存(1M左右)，对于使用完的进程，服务都要及时进行回收。

## 尽量使用系统资源

系统组件，图片甚至控件的id

## 减少view的层级

对于可以 延迟初始化的页面，使用 viewstub

## 数据相关

序列化数据使用protobuf可以比xml省30%内存，慎用shareprefercnce，因为对于同一个sp，会将整个xml文件载入内存，有时候为了读一个配置，就会将几百k的数据读进内存，
数据库字段尽量精简，只读取所需字段。

## dex优化，代码优化，谨慎使用外部库

有人觉得代码多少于内存没有关系，实际会有那么点关系，现在稍微大一点的项目动辄就是百万行代码以上，多dex也是常态，不仅占用rom空间，实际上运行的时候需要加载dex也是会占用内存的(几M)，
有时候为了使用一些库里的某个功能函数就引入了整个庞大的库，此时可以考虑抽取必要部分，开启proguard优化代码，使用Facebook redex使用优化dex(好像有不少坑)。














































